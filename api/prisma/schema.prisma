// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Medico {
  idMedico        String         @id @default(uuid())
  correo          String
  nombre          String
  apellidoPaterno String
  apellidoMaterno String?
  telefono        String
  especialidad    String
  pacientes       Paciente[]
  contrasenia     String
  Medicamento     Medicamento[]
  Dieta           Dieta[]
  Ejercicio       Ejercicio[]
  Recordatorio    Recordatorio[]
}

model Paciente {
  idPaciente      String         @id @default(uuid())
  correo          String
  nombre          String
  apellidoPaterno String
  apellidoMaterno String?
  telefono        String
  fechaNacimiento DateTime
  genero          Boolean
  tipoDiabetes    String
  nivelAzucar     Int
  idMedico        String
  medico          Medico         @relation(fields: [idMedico], references: [idMedico])
  medicamentos    Medicamento[]
  dietas          Dieta[]
  ejercicios      Ejercicio[]
  Recordatorio    Recordatorio[]
  contrasenia     String
}

model Medicamento {
  idMedicamento String    @id @default(uuid())
  nombre        String
  descripcion   String
  dosis         String
  horario       DateTime
  fechaInicio   DateTime
  fechaFin      DateTime
  idPaciente    String?
  paciente      Paciente? @relation(fields: [idPaciente], references: [idPaciente])
  idMedico      String
  medico        Medico    @relation(fields: [idMedico], references: [idMedico])
}

model Dieta {
  idDieta       String    @id @default(uuid())
  nombre        String
  descripcion   String
  tipoAlimentos String
  carbohidratos Int
  calorias      Int
  restricciones String
  idPaciente    String?
  paciente      Paciente? @relation(fields: [idPaciente], references: [idPaciente])
  idMedico      String
  medico        Medico    @relation(fields: [idMedico], references: [idMedico])
}

model Ejercicio {
  idEjercicio String    @id @default(uuid())
  nombre      String
  descripcion String
  duracion    Int
  intensidad  String
  idPaciente  String?
  paciente    Paciente? @relation(fields: [idPaciente], references: [idPaciente])
  idMedico    String
  medico      Medico    @relation(fields: [idMedico], references: [idMedico])
}

model Recordatorio {
  idRecordatorio String    @id @default(uuid())
  mensaje        String
  fecha          DateTime
  tipo           String
  idPaciente     String?
  paciente       Paciente? @relation(fields: [idPaciente], references: [idPaciente])
  idMedico       String
  medico         Medico    @relation(fields: [idMedico], references: [idMedico])
}
